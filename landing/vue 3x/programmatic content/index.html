<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <!-- <script>
    window.appDomain =
      window.appDomain ||
      '' ||
      '<ctrl:eval>Platform.Variable.GetValue("@appDomain")||""</ctrl:eval>';
    window.contentDetail = window.contentDetail || (
      <ctrl:eval>Platform.Variable.GetValue('@contentDetail')||{ }</ctrl:eval>
    );


  </script> -->
  <script src="https://seguros.comunicaciones.sura.com/js-libUtils-1"></script>
  <script>
    let data = {
      curso: 'test',
      nombre: 'cristian',
      dni: 'C1037640856',
      correo: 'prueba@correo.com',
    };

    const email = 'C1037640856';
    const dataextension = 'extension test 2022';
    const apiEventKey = 'APIEvent-c3ef1b50-5f9b-74a3-ed35-2c0b6af4a532';
    const payload = window.libUtils.b64EncodeUnicode(
      JSON.stringify({
        data: data,
        filter: ['dni'],
        value: [email],
      })
    );
    console.log('payload ' + payload);
    console.log('state.de.save ' + encodeURIComponent(dataextension));
      // const url = `https://seguros.comunicaciones.sura.com/ssjs-manageDataSalesForce-2?pl=${payload}&de=${encodeURIComponent(
      //   dataextension
      // )}&tp=add&ae=${apiEventKey}&ck=dni`;

      const url = `https://seguros.comunicaciones.sura.com/ssjs-manageDataSalesForce-2?pl=${payload}&de=${encodeURIComponent(
        dataextension
      )}&tp=delete`;
    
    window.libUtils.getScript(
      'ssjsManager',
      url,
      () => console.log('ssjs loaded'),
      true
    );

  // "Data": parsed.data
  // var resultStatusJSON = Platform.Function.ParseJSON(resultStatusStr);
  // 

  </script>
</body>
</html>